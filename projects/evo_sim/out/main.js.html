<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>let COLORS = {}; // colors can only be initialized in setup

let dead = [];
const elite = 0.1; // percent of population to use for next generation

let MOVE_SPEED = 100;
const KILL_FRAMES = 10; // how many frames blob not moving before being killed

const SCREEN_WIDTH = 600;
const SCREEN_HEIGHT = 600;

const LAYER_SIZES = [3, 3, 2];

let world;



function setup() {
    createCanvas(SCREEN_WIDTH, SCREEN_HEIGHT);
    noLoop();
    
    COLORS = {
        background: color(255),
        food: color(0, 200, 0)
    };
    
    world = new World({
        width: SCREEN_WIDTH,
        height: SCREEN_HEIGHT,
        LAYER_SIZES: LAYER_SIZES,
        population: 100,
        initialSize: 20,
        viewRange: 3
    }, () => {
        // restart simulation
    });
}



function draw() {
    world.draw();
}



/**
 * Called once all blobs are dead. Breed and restart simulation
 */
function restartSim() {
    // reset blobs list
    blobs = [];
    
    // sort dead according to size, but use order in which they died for tiebreaker
    dead.sort((a, b) => {
        return a.size - b.size;
    });
    
    // best blobs are at the end of the array
    for (let i = population - 1; i >= 0; i--) {
        // breed networks
        for (let j = population - 1; j >= i - 1; j--) {
            // add a new blob with random coords and a new network bred from 2 dead ones
            blobs.push(
                new Blob(
                    random(SCREEN_WIDTH*SPAWN_MARGIN, SCREEN_WIDTH*(1-SPAWN_MARGIN)),
                    random(SCREEN_HEIGHT*SPAWN_MARGIN, SCREEN_HEIGHT*(1-SPAWN_MARGIN)),
                    START_SIZE,
                    new Network(dead[i].network, dead[j].network)
                )
            );
            if (blobs.length >= population) break;
        }
        if (blobs.length >= population) break;
        
        // past elite part of population, start back from the best
        if (i/population &lt; 1-elite) {
            i = population - 1;
        }
    }
    
    dead = [];
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BasicBlob.html">BasicBlob</a></li><li><a href="Blob.html">Blob</a></li><li><a href="Quadtree.html">Quadtree</a></li><li><a href="World.html">World</a></li></ul><h3>Global</h3><ul><li><a href="global.html#restartSim">restartSim</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.4</a> on Sat Aug 12 2017 12:49:04 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
