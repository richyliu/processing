<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: quadtree.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: quadtree.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Quadtree for collision detection
 */
class Quadtree {
    /**
     * Makes a quadtree
     * @param  {number} numBoxes  How many boxes wide the quadtree is
     * @param  {number} width     Width of the screen
     * @param  {number} height    Height of the screen
     */
    constructor(numBoxes, width, height) {
        /**
         * Each boxes contains some blobs to detect collisions. A blob may
         * belong to multiple boxes if it doesn't fit entirely in one box.
         * @type {Blob[][]}
         */
        this.boxes = Array(Math.pow(numBoxes, 2)).fill([]);
        
        /**
         * Width of the screen
         * @constant {number}
         */
        this.width = width;
        /**
         * Height of the screen
         * @constant {number}
         */
        this.height = height;
        /**
         * Width of the box
         * @constant {number}
         */
        this.boxWidth = width / numBoxes;
        /**
         * Height of the box
         * @constant {number}
         */
        this.boxHeight = height / numBoxes;
        /**
         * How many boxes wide the quadtree is
         * @type {number}
         */
        this.numBoxes = numBoxes;
    }
    
    
    /**
     * Adds a blob to the quadtree
     * @param {Blob} blob Blob to add
     */
    add(blob) {
        // x and y index of the box
        let boxX = Math.floor(blob.x / this.boxWidth);
        let boxY = Math.floor(blob.y / this.boxHeight);
        // pixel coords within the box
        let pixelX = blob.x % this.boxWidth;
        let pixelY = blob.y % this.boxHeight;
        
        this.boxes[this.numBoxes*boxY + boxX].push(blob);
        
        // add to multiple boxes if necessary
        if (pixelX &lt; blob.size/2 &amp;&amp; boxX > 0) {
            this.boxes[this.numBoxes*boxY + boxX - 1].push(blob);
        } else if (pixelX > this.boxWidth-blob.size/2 &amp;&amp; boxX &lt; this.numBoxes-1) {
            this.boxes[this.numBoxes*boxY + boxX + 1].push(blob);
        }
        if (pixelY &lt; blob.size/2 &amp;&amp; boxY > 0) {
            this.boxes[this.numBoxes*(boxY-1) + boxX].push(blob);
        } else if (pixelY > this.boxHeight-blob.size/2 &amp;&amp; boxY &lt; this.numBoxes-1) {
            this.boxes[this.numBoxes*(boxY+1) + boxX].push(blob);
        }
    }
    
    
    /**
     * Check for collisions with this circle
     * @param  {number} x      X coord of the circle
     * @param  {number} y      Y coord of the circle
     * @param  {number} radius Radius of the circle
     * @return {Blob[]}        Blobs that collided with circle. Array many be empty
     */
    checkCollision(x, y, radius) {
        
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BasicBlob.html">BasicBlob</a></li><li><a href="Blob.html">Blob</a></li><li><a href="Quadtree.html">Quadtree</a></li><li><a href="World.html">World</a></li></ul><h3>Global</h3><ul><li><a href="global.html#restartSim">restartSim</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.4</a> on Sat Aug 12 2017 12:49:04 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
